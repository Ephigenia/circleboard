<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>CircleBoard – The CircleCI Status Board</title>
        <meta name="description" content="CircleBoard – The CircleCI Status Board">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet/less" type="text/css" href="less/main.less" />
    </head>
    <body>
        <div id="app"></div>

        <script src="/socket.io/socket.io.js"></script>
        <script src="/js/less.js"></script>
        <script src="http://zeptojs.com/zepto.min.js"></script>
        <script>
        var socket = io.connect('http://');
        socket.on('builds', function(builds) {
            root = $('#app');
            root.html('');
            for (index in builds) {
                build = builds[index];
                buildNode = $('<div></div>');
                buildNode.addClass('build');
                buildNode.addClass('build-' + build.result);
                buildNode.html(
                    '<h1>Spritmap-API</h1>'
                    + '<div class="meta">' 
                        + build.branch.name + ', build #' + build.number + '<br />'
                        + '<author>' + build.commit.author + '</author>'
                        + '<q>' + build.commit.subject + '</q>'
                    + '</div>'
                    + '<time>' + build.finished + '</time>'
                );
                buildNode.append();

                root.append(buildNode);
            }
        });
        </script>
    </body>
</html>
